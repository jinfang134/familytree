(function(t){function e(e){for(var a,i,l=e[0],c=e[1],u=e[2],s=0,p=[];s<l.length;s++)i=l[s],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&p.push(r[i][0]),r[i]=0;for(a in c)Object.prototype.hasOwnProperty.call(c,a)&&(t[a]=c[a]);d&&d(e);while(p.length)p.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],a=!0,l=1;l<n.length;l++){var c=n[l];0!==r[c]&&(a=!1)}a&&(o.splice(e--,1),t=i(i.s=n[0]))}return t}var a={},r={app:0},o=[];function i(e){if(a[e])return a[e].exports;var n=a[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=a,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/vue-familytree/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var d=c;o.push(["a1ec","chunk-vendors"]),n()})({3720:function(t,e,n){},5230:function(t,e,n){t.exports=n.p+"img/male.40da58fa.svg"},a1ec:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("FamilyTree",{attrs:{data:t.data},on:{click:t.handleClick}})],1)},o=[],i=(n("b0c0"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("svg",{staticClass:"d3-tree-vi width-100-percent container-border"})])}),l=[],c=(n("99af"),n("4160"),n("159b"),n("5698")),u=n("cb2d"),d=n.n(u),s=n("5230"),p=n.n(s),f={props:{data:{type:Object}},data:function(){return{nodeId:"",nodeName:"",zoom:null,index:0,root:null,nodes:[],links:[],dTreeData:null,margin:{top:20,right:90,bottom:30,left:90},currentNode:null,svg:null,container:null,newNodeName:"",rootNodeId:null}},methods:{appendButton:function(t){var e=t.selectAll("g.btn").data((function(t){return console.log("d:",t),t.children?[1]:t._children?[0]:[]})),n=e.enter().append("g").attr("class","btn");n.append("circle").attr("cx",0).attr("cy",34).attr("r",6).attr("class","btn-more"),n.append("text").attr("dy","0.31em").attr("x",0).attr("y",34.5).attr("text-anchor","middle").text((function(t){return console.log(t),1==t?"-":"+"})),e.exit().remove(),t.merge(n)},appendNode:function(t){var e=4,n=32;t.append("rect").attr("x",-(n+2*e)/2).attr("y",-18).attr("rx",4).attr("ry",4).attr("width",(function(t){var a=t.data&&t.data.companion||[];return n+2*e+32*a.length})).attr("class","container");this.appendButton(t);var a=t.append("g").attr("class","main"),r=t.append("g").attr("class","comp");a.append("image").attr("x",-n/2).attr("y",-n/2).attr("width",n).attr("height",n).attr("href",(function(t){return"f"==t.data.gender?d.a:p.a})),a.append("text").attr("dy","0.31em").attr("class","name").attr("x",0).attr("y",24).attr("text-anchor","middle").text((function(t){return t.data.name}));var o=r.selectAll("g").data((function(t){return t.data&&t.data.companion||[]})),i=o.enter().append("g").attr("class","companions").attr("transform",(function(t,e){return"translate(".concat(32*e,",0)")}));i.append("image").attr("x",16).attr("y",-16).attr("width",32).attr("height",32).attr("href",(function(t){return"f"==t.gender?d.a:p.a})),i.append("text").attr("dy","0.31em").attr("class","name").attr("x",32).attr("y",24).attr("text-anchor","middle").text((function(t){return t.name})),o.exit().remove()}},mounted:function(){var t=document.body.clientWidth,e=document.body.clientHeight;this.width=Math.floor(.6*t),this.height=e-72,console.log("width: "+this.width+" height: "+this.height);var n={top:40,right:90,bottom:10,left:100},a=this.width,r=130,o=80,i=c["e"]().nodeSize([o,r]),l=c["c"]().x((function(t){return t.x})).y((function(t){return t.y+30})),u=c["b"](this.data);u.x0=0,u.y0=0,u.descendants().forEach((function(t,e){t.id=e,t._children=t.children,t.depth&&4!==t.data.name.length&&(t.children=null)}));var d=c["d"]("svg.d3-tree-vi").attr("viewBox",[-a/2,-n.top,a,o]),s=d.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5),p=d.append("g").attr("pointer-events","all"),f=c["f"]().on("zoom",m).scaleExtent([.5,8]);function m(){p.attr("transform",c["a"].transform),s.attr("transform",c["a"].transform)}d.call(f).on("dblclick.zoom",null),f(d);var h=this;function v(t){var e=c["a"]&&c["a"].altKey?2500:750,r=u.descendants().reverse(),o=u.links();i(u);var f=u,m=u;u.eachBefore((function(t){t.x<f.x&&(f=t),t.x>m.x&&(m=t)}));var g=m.x-f.x+n.top+n.bottom,y=d.transition().duration(e).attr("viewBox",[-a/2,-n.top,a,g]).tween("resize",window.ResizeObserver?null:function(){return function(){return d.dispatch("toggle")}}),x=p.selectAll("g.family").data(r,(function(t){return t.id})),b=x.enter().append("g").attr("class","family").attr("transform",(function(){return"translate(".concat(t.x0,",").concat(t.y0,")")})).attr("fill-opacity",0).attr("stroke-opacity",0).on("click",(function(t){t.children=t.children?null:t._children,v(t),event.preventDefault()}));h.appendNode(b);x.merge(b).transition(y).attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")})).attr("cursor",(function(t){return t._children||t.children?"pointer":""})).attr("fill-opacity",1).attr("stroke-opacity",1),x.exit().transition(y).remove().attr("transform",(function(){return"translate(".concat(t.x,",").concat(t.y+30,")")})).attr("fill-opacity",0).attr("stroke-opacity",0);var w=s.selectAll("path").data(o,(function(t){return t.target.id})),k=w.enter().append("path").attr("class","link").attr("stroke-width",(function(e){return Math.max(3-t.depth,1)})).attr("d",(function(){var e={x:t.x0,y:t.y0};return l({source:e,target:e})}));w.merge(k).transition(y).attr("d",l),w.exit().transition(y).remove().attr("d",(function(){var e={x:t.x,y:t.y};return l({source:e,target:e})})),u.eachBefore((function(t){t.x0=t.x,t.y0=t.y}))}v(u)}},m=f,h=(n("be37"),n("2877")),v=Object(h["a"])(m,i,l,!1,null,null,null),g=v.exports,y={name:"张三",value:1,gender:"m",companion:[{name:"李四娟",gender:"f"}],children:[{name:"张三一",value:23,gender:"male",children:[{name:"张四",gender:"f",children:[{name:"张六一",value:9354},{name:"张六二",value:66,children:[{name:"张六一",value:9354},{name:"张六二",value:66}]}]},{name:"张五",value:13033,gender:"f",companion:[{name:"王五",gender:"m"}],children:[{name:"张六一",value:9354},{name:"张六二",value:66}]},{name:"张六",value:24,children:[{name:"张六一",value:9354},{name:"张六二",value:66},{name:"张六三",value:767,children:[{name:"张九一",value:93541},{name:"张九二",value:662},{name:"张九三",value:7673,children:[{name:"张六一",value:9354,children:[{name:"张六一",value:9354},{name:"张六二",value:66}]},{name:"张六二",value:66}]}]}]},{name:"math",value:49,children:[{name:"张六一",value:9354},{name:"张六二",value:66}]}]},{name:"张三二",value:38,children:[{name:"Visualization",value:16540}]}]},x={name:"App",data:function(){return{data:y}},components:{FamilyTree:g},methods:{handleClick:function(t){alert(t.name)}}},b=x,w=(n("d7fb"),Object(h["a"])(b,r,o,!1,null,null,null)),k=w.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(t){return t(k)}}).$mount("#app")},a3b2:function(t,e,n){},be37:function(t,e,n){"use strict";n("a3b2")},cb2d:function(t,e,n){t.exports=n.p+"img/female.8c3851ae.svg"},d7fb:function(t,e,n){"use strict";n("3720")}});
//# sourceMappingURL=app.62c721f7.js.map